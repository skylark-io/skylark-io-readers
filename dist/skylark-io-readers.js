/**
 * skylark-io-readers - The skylark reader io library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(r,e){var t=e.define,require=e.require,a="function"==typeof t&&t.amd,n=!a&&"undefined"!=typeof exports;if(!a&&!t){var i={};t=e.define=function(r,e,t){"function"==typeof t?(i[r]={factory:t,deps:e.map(function(e){return function(r,e){if("."!==r[0])return r;var t=e.split("/"),a=r.split("/");t.pop();for(var n=0;n<a.length;n++)"."!=a[n]&&(".."==a[n]?t.pop():t.push(a[n]));return t.join("/")}(e,r)}),resolved:!1,exports:null},require(r)):i[r]={factory:null,resolved:!0,exports:t}},require=e.require=function(r){if(!i.hasOwnProperty(r))throw new Error("Module "+r+" has not been defined");var module=i[r];if(!module.resolved){var t=[];module.deps.forEach(function(r){t.push(require(r))}),module.exports=module.factory.apply(e,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(r,require){r("skylark-io-readers/readers",["skylark-langx-ns"],function(r){return r.attach("io.readers")}),r("skylark-io-readers/_reader",["skylark-langx-events","./readers"],function(r,e){"use strict";var t=r.Emitter.inherit({klassName:"Reader",_construct:function(r){this.data=r,this.length=r.length,this.index=0,this.zero=0},checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var e,t=0;for(this.checkOffset(r),e=this.index+r-1;e>=this.index;e--)t=(t<<8)+this.byteAt(e);return this.index+=r,t},readString:function(r){return utils.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}});return e.Reader=t}),r("skylark-io-readers/array-reader",["./readers","./_reader"],function(r,e){"use strict";var t=e.inherit({klassName:"ArrayReader",_construct:function(r){e.prototype._construct.call(this,r);for(var t=0;t<this.data.length;t++)r[t]=255&r[t]},byteAt:function(r){return this.data[this.zero+r]},lastIndexOfSignature:function(r){for(var e=r.charCodeAt(0),t=r.charCodeAt(1),a=r.charCodeAt(2),n=r.charCodeAt(3),i=this.length-4;i>=0;--i)if(this.data[i]===e&&this.data[i+1]===t&&this.data[i+2]===a&&this.data[i+3]===n)return i-this.zero;return-1},readAndCheckSignature:function(r){var e=r.charCodeAt(0),t=r.charCodeAt(1),a=r.charCodeAt(2),n=r.charCodeAt(3),i=this.readData(4);return e===i[0]&&t===i[1]&&a===i[2]&&n===i[3]},readData:function(r){if(this.checkOffset(r),0===r)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e}});return r.ArrayReader=t}),r("skylark-io-readers/uint8-array-reader",["./readers","./array-reader"],function(r,e){"use strict";var t=e.inherit({klassName:"Uint8ArrayReader",readData:function(r){if(this.checkOffset(r),0===r)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e}});return r.Uint8ArrayReader=t}),r("skylark-io-readers/buffer-reader",["./readers","./uint8-array-reader"],function(r,e){"use strict";var t=ArrayReader.inherit({klassName:"BufferReader",readData:function(r){this.checkOffset(r);var e=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e}});return r.BufferReader=t}),r("skylark-io-readers/string-reader",["./readers","./_reader"],function(r,e){"use strict";var t=e.inherit({klassName:"StringReader",byteAt:function(r){return this.data.charCodeAt(this.zero+r)},lastIndexOfSignature:function(r){return this.data.lastIndexOf(r)-this.zero},readAndCheckSignature:function(r){var e=this.readData(4);return r===e},readData:function(r){this.checkOffset(r);var e=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e}});return r.StringReader=t}),r("skylark-io-readers/main",["./readers","./array-reader","./buffer-reader","./string-reader","./uint8-array-reader"],function(r){return r}),r("skylark-io-readers",["skylark-io-readers/main"],function(r){return r})}(t),!a){var s=require("skylark-langx-ns");n?module.exports=s:e.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-io-readers.js.map
